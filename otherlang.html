<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="Capnproto : Cap'n Proto serialization/RPC system" />
    <meta name="viewport" content="width=480">

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Cap'n Proto</title>
  </head>

  <body class="desktop">

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
      <header class="inner">
        <img src="images/captain_proto.png">
        <div id="infinitely_faster">
          <img src="images/infinitely_faster.png">
        </div>
      </header>
      <a id="discuss_banner" href="https://groups.google.com/group/capnproto">Discuss on Groups</a>
      <a id="forkme_banner" href="https://github.com/kentonv/capnproto">View on GitHub</a>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">

      <section id="menu">
        <ul>
          <li><a href="index.html">Introduction</a></li>
          <li><a href="install.html">Installation</a></li>
          <li><a href="language.html">Schema Language</a></li>
          <li><a href="encoding.html">Encoding</a></li>
          <li><a href="rpc.html">RPC Protocol</a></li>
          <li><a href="cxx.html">C++ Runtime</a></li>
          <li><a href="otherlang.html">Other Languages</a></li>
        </ul>
      </section>
      <script type="text/javascript">
        // Highlight the current page in the sidebar, make the sidebar items easy to click, and
        // make the sidebar float when scrolled, unless there isn't enough space.
        (function () {
          var pathname = document.location.pathname;
          var last = pathname.lastIndexOf('/');
          var filename = pathname.substring(last);

          if (filename == "/") {
            filename = "/index.html";
          }

          var menu = document.getElementById("menu");
          var setMenuLayout = function() {
            if (window.innerWidth < 900) {
              document.body.className = "narrow";
              menu.className = "";
            } else {
              if (document.body.clientWidth < 1340) {
                document.body.className = "normal";
              } else {
                document.body.className = "wide";
              }

              if (window.scrollY < 410 || window.innerHeight < menu.clientHeight + 100) {
                menu.className = "";
              } else {
                menu.className = "floating";
              }
            }
          };
          setMenuLayout();
          window.onresize = setMenuLayout;
          window.onscroll = setMenuLayout;

          var items = menu.getElementsByTagName("li");
          for (var i = 0; i < items.length; i++) {
            var link = items[i].getElementsByTagName("a")[0];
            var href = link.href;
            if (href.lastIndexOf(filename) >= 0) {
              var parent = link.parentNode;
              parent.removeChild(link);
              var p = document.createElement("p");
              p.appendChild(document.createTextNode(link.innerText || link.textContent));
              p.onclick = (function(url) {
                return function(event) {
                  window.location.href = url;
                  event.stopPropagation();
                }
              })(href + "#main_content");
              parent.appendChild(p);
              items[i].className = "selected";
              var toc = document.createElement("ul");
              toc.id = "toc";
              items[i].appendChild(toc);
            } else {
              items[i].onclick = (function(url) {
                return function(event) {
                  window.location.href = url;
                  event.stopPropagation();
                }
              })(href);
            }
          }
        })();
      </script>
      <section id="main_content" class="inner">
        <h1>Other Languages</h1>

<p>Cap&#39;n Proto&#39;s reference implementation is in C++.  Implementations in other languages are
maintained by respective authors and have not been reviewed by me
(<a href="https://github.com/kentonv">@kentonv</a>).  Here are some implementations I&#39;m aware of:</p>

<ul>
<li><a href="https://github.com/jmckaskill/go-capnproto">C and Go</a> by
<a href="https://github.com/jmckaskill">@jmckaskill</a></li>
<li><a href="https://github.com/jparyani/capnproto">Boost Python wrappers for Cap&#39;n Proto C++</a> by
<a href="https://github.com/jparyani">@jparyani</a></li>
</ul>

<h2>Contribute Your Own!</h2>

<p>We&#39;d like to support many more languages in the future!</p>

<p>If you&#39;d like to own the implementation of Cap&#39;n Proto in some particular language,
<a href="https://groups.google.com/group/capnproto">let us know</a>!</p>

<p><strong>You should e-mail the list <em>before</em> you start hacking.</strong>  We don&#39;t bite, and we&#39;ll probably have
useful tips that will save you time.  :)</p>

<p><strong>Do not implement your own schema parser.</strong>  The schema language is more complicated than it
looks, and the algorithm to determine offsets of fields is subtle.  If you reuse <code>capnpc</code>&#39;s parser,
you won&#39;t risk getting these wrong, and you won&#39;t have to spend time keeping your parser up-to-date.
In fact, you can still write your code generator in any language you want, using compiler plugins!</p>

<h3>How to Write Compiler Plugins</h3>

<p>The Cap&#39;n Proto compiler / code generator binary, <code>capnpc</code>, supports a &quot;plugin&quot; interface for
custom code generators.  Plugins are independent executables (written in any language) which read
a description of the schema from standard input and then generate the necessary code.  The
description is itself a Cap&#39;n Proto message, defined by
<a href="https://github.com/kentonv/capnproto/blob/master/c%2B%2B/src/capnproto/schema.capnp">schema.capnp</a>
(the file will move to a better location eventually).  Specifically, the plugin receives a
<code>CodeGeneratorRequest</code>, using
<a href="http://kentonv.github.io/capnproto/encoding.html#serialization_over_a_stream">standard serialization</a>
(not packed).</p>

<p>Of course, because the input to a plugin is itself in Cap&#39;n Proto format, if you write your
plugin directly in the language you wish to support, you may have a bootstrapping problem:  you
somehow need to generate code for <code>schema.capnp</code> before you write your code generator.  Luckily,
because of the simplicity of the Cap&#39;n Proto format, it is generally not too hard to do this by
hand.  Remember that you can use <code>capnpc -v schema.capnp</code> to get a dump of the sizes and offsets
of all structs and fields defined in the file.</p>

<p><code>capnpc</code> normally looks for plugins in <code>$PATH</code> with the name <code>capnpc-[language]</code>.  However, if the
language name given on the command line contains a slash character, <code>capnpc</code> assumes that it is an
exact path to the plugin executable, and does not search <code>$PATH</code>.  Examples:</p>
<div class="highlight"><pre><code class="text language-text" data-lang="text"># Searches $PATH for executable &quot;capnpc-mylang&quot;.
capnpc -o mylang addressbook.capnp

# Uses plugin executable &quot;myplugin&quot; from the current directory.
capnpc -o ./myplugin addressbook.capnp
</code></pre></div>
<p>If the user specifies an output directory, the compiler will run the plugin with that directory
as the working directory, so you do not need to worry about this.</p>

<p><a href="https://github.com/kentonv/capnproto/blob/master/c%2B%2B/src/capnproto/compiler/capnpc-capnp.c%2B%2B">This example plugin</a>
writes the schema back to standard output in Cap&#39;n Proto schema language, similar to what
<code>capnpc -v</code> does.</p>

        <div style="clear: left;"></div>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Cap'n Proto maintained by <a href="https://github.com/kentonv">kentonv</a></p>
        <p>Design by <a href="http://www.starfruit-cafe.net/blog">sailorhg</a> âˆ™ Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    <script type="text/javascript">
      // Inject a table of contents into the sidebar.
      (function() {
        var toc = document.getElementById("toc");
        if (toc) {
          var content = document.getElementById("main_content").childNodes;
          var headings = [];

          for (var i = 0; i < content.length; i++) {
            if (content[i].tagName == "H2" ||
                content[i].tagName == "H3" ||
                content[i].tagName == "H4") {
              headings.push(content[i]);
            }
          }

          var levels = [toc];
          for (var i in headings) {
            var hl = headings[i].tagName.slice(1) - 1;
            while (hl > levels.length) {
              var parent = levels[levels.length - 1];
              var item = parent.childNodes[parent.childNodes.length - 1];
              var sublist = document.createElement("ul");
              item.appendChild(sublist);
              levels.push(sublist);
            }
            while (hl < levels.length) {
              levels.pop();
            }

            var parent = levels[levels.length - 1];
            var item = document.createElement("li");
            var p = document.createElement("p");
            var link = document.createElement("a");
            link.appendChild(document.createTextNode(headings[i].innerText || headings[i].textContent));
            link.href = "#" + headings[i].id;
            p.appendChild(link);
            p.onclick = (function(url) {
              return function(event) {
                window.location.href = url;
                event.stopPropagation();
              }
            })(link.href);
            item.appendChild(p);
            parent.appendChild(item);
          }
        }

        var menu = document.getElementById("menu");
        document.getElementById("main_content").style.minHeight = menu.clientHeight + 100 + "px";
      })()
    </script>

    <script type="text/javascript">
      var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
      document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
      try {
        var pageTracker = _gat._getTracker("UA-39711112-1");
        pageTracker._trackPageview();
      } catch(err) {}
    </script>


  </body>
</html>
